{
  "version": "0.4.1",
  "bundle_id": "project-analyse",
  "namespace": "project-analyse",
  "default_workflow": {
    "file": "workflows/research-analyse.yaml",
    "id": "research-analyse"
  },
  "workspace_integration": {
    "target": "task",
    "strategy": "symlink",
    "readOnly": true
  },
  "content_groups": {
    "shared-resources": {
      "description": "Разделяемые ресурсы между прогонами (shared target)",
      "target": "shared",
      "files": [
        {
          "src": "shared/analysis",
          "dst": "."
        }
      ]
    },
    "scripts": {
      "description": "CLI-скрипты пайплайна research-structure",
      "files": [
        {
          "src": "scripts/init-db.ts",
          "dst": "init-db.ts"
        },
        {
          "src": "scripts/generate-structure-report.ts",
          "dst": "generate-structure-report.ts"
        },
        {
          "src": "scripts/generate-file-lists.ts",
          "dst": "generate-file-lists.ts"
        },
        {
          "src": "scripts/clean-structure-shared.ts",
          "dst": "clean-structure-shared.ts"
        },
        {
          "src": "scripts/clean-structure-workflow.ts",
          "dst": "clean-structure-workflow.ts"
        },
        {
          "src": "scripts/write-to-db.ts",
          "dst": "write-to-db.ts"
        },
        {
          "src": "scripts/utils/logging.ts",
          "dst": "utils/logging.ts"
        },
        {
          "src": "scripts/utils/module.ts",
          "dst": "utils/module.ts"
        },
        {
          "src": "scripts/utils/sqlite.ts",
          "dst": "utils/sqlite.ts"
        }
      ]
    },
    "workflows": {
      "description": "Workflow и конфигурация analysis стадии",
      "files": [
        {
          "src": "analysis/config.json",
          "dst": "analysis/config.json"
        },
        {
          "src": "workflows/research-analyse.yaml",
          "dst": "research-analyse.yaml"
        },
        {
          "src": "workflows/research-structure.yaml",
          "dst": "research-structure.yaml"
        }
      ]
    },
    "fixtures": {
      "description": "Фикстуры для ingest и ожидаемых артефактов",
      "files": [
        {
          "src": "tests/fixtures/ingest.jsonl",
          "dst": "tests/fixtures/ingest.jsonl"
        },
        {
          "src": "tests/fixtures/expected/entities.json",
          "dst": "tests/fixtures/expected/entities.json"
        },
        {
          "src": "tests/fixtures/expected/relationships.json",
          "dst": "tests/fixtures/expected/relationships.json"
        },
        {
          "src": "tests/fixtures/expected/metrics.json",
          "dst": "tests/fixtures/expected/metrics.json"
        },
        {
          "src": "tests/fixtures/expected/external-systems.json",
          "dst": "tests/fixtures/expected/external-systems.json"
        },
        {
          "src": "tests/fixtures/expected/endpoints.json",
          "dst": "tests/fixtures/expected/endpoints.json"
        },
        {
          "src": "tests/fixtures/expected/queues.json",
          "dst": "tests/fixtures/expected/queues.json"
        },
        {
          "src": "tests/fixtures/expected/coverage.json",
          "dst": "tests/fixtures/expected/coverage.json"
        }
      ]
    },
    "demo-scripts": {
      "description": "Демо-проект: сценарии и входные данные",
      "files": [
        {
          "src": "examples/research-structure-demo/README.md",
          "dst": "examples/research-structure-demo/README.md"
        },
        {
          "src": "examples/research-structure-demo/ingest.jsonl",
          "dst": "examples/research-structure-demo/ingest.jsonl"
        },
        {
          "src": "examples/research-structure-demo/remarks.json",
          "dst": "examples/research-structure-demo/remarks.json"
        },
        {
          "src": "examples/research-structure-demo/workflows/monitor.yaml",
          "dst": "examples/research-structure-demo/workflows/monitor.yaml"
        },
        {
          "src": "examples/research-structure-demo/analysis/.gitkeep",
          "dst": "examples/research-structure-demo/analysis/.gitkeep"
        }
      ]
    },
    "demo-apps": {
      "description": "Демо-проект: пример приложений и сервисов",
      "files": [
        {
          "src": "examples/research-structure-demo/apps/api/src/index.ts",
          "dst": "examples/research-structure-demo/apps/api/src/index.ts"
        },
        {
          "src": "examples/research-structure-demo/apps/worker/src/index.ts",
          "dst": "examples/research-structure-demo/apps/worker/src/index.ts"
        },
        {
          "src": "examples/research-structure-demo/apps/reporting/src/aggregator.ts",
          "dst": "examples/research-structure-demo/apps/reporting/src/aggregator.ts"
        },
        {
          "src": "examples/research-structure-demo/services/cron/job.ts",
          "dst": "examples/research-structure-demo/services/cron/job.ts"
        },
        {
          "src": "examples/research-structure-demo/infrastructure/terraform/main.tf",
          "dst": "examples/research-structure-demo/infrastructure/terraform/main.tf"
        }
      ]
    },
    "demo-docs": {
      "description": "Демо-проект: документация",
      "files": [
        {
          "src": "examples/research-structure-demo/docs/ADR-001-current.md",
          "dst": "examples/research-structure-demo/docs/ADR-001-current.md"
        },
        {
          "src": "examples/research-structure-demo/docs/ADR-999-legacy.md",
          "dst": "examples/research-structure-demo/docs/ADR-999-legacy.md"
        }
      ]
    },
    "config": {
      "description": "Глобальные конфигурации и queue настройки",
      "files": [
        {
          "src": "examples/research-structure-demo/configs/queue.yaml",
          "dst": "examples/research-structure-demo/configs/queue.yaml"
        }
      ]
    },
    "docs": {
      "description": "Документация bundle",
      "files": [
        {
          "src": "README.md",
          "dst": "README.md"
        },
        {
          "src": "docs/entities-checklist.md",
          "dst": "entities-checklist.md"
        }
      ]
    },
    "schemas": {
      "description": "Шаблоны schema.output для стадий workflow",
      "files": [
        {
          "src": "schemas/outputs/code-prepare.yaml",
          "dst": "schemas/outputs/code-prepare.yaml"
        },
        {
          "src": "schemas/outputs/docs-prepare.yaml",
          "dst": "schemas/outputs/docs-prepare.yaml"
        },
        {
          "src": "schemas/outputs/code-process-file.yaml",
          "dst": "schemas/outputs/code-process-file.yaml"
        },
        {
          "src": "schemas/outputs/docs-process-file.yaml",
          "dst": "schemas/outputs/docs-process-file.yaml"
        },
        {
          "src": "schemas/outputs/code-summary.yaml",
          "dst": "schemas/outputs/code-summary.yaml"
        },
        {
          "src": "schemas/outputs/docs-summary.yaml",
          "dst": "schemas/outputs/docs-summary.yaml"
        },
        {
          "src": "schemas/outputs/lanes-summary.yaml",
          "dst": "schemas/outputs/lanes-summary.yaml"
        }
      ]
    }
  },
  "defaults": {
    "attach_groups": [
      "scripts",
      "workflows",
      "fixtures",
      "demo-scripts",
      "demo-apps",
      "demo-docs",
      "config",
      "docs",
      "schemas",
      "shared-resources"
    ]
  },
  "context": {
    "expose": [
      {
        "key": "scripts",
        "group": "scripts"
      },
      {
        "key": "workflows",
        "group": "workflows"
      },
      {
        "key": "fixtures",
        "group": "fixtures"
      },
      {
        "key": "demo",
        "group": "demo-scripts"
      },
      {
        "key": "demo.apps",
        "group": "demo-apps"
      },
      {
        "key": "demo.docs",
        "group": "demo-docs"
      },
      {
        "key": "config",
        "group": "config"
      },
      {
        "key": "docs",
        "group": "docs"
      },
      {
        "key": "schemas",
        "group": "schemas"
      }
    ]
  },
  "workflows": [
    {
      "id": "research-analyse",
      "path": "workflows/research-analyse.yaml",
      "description": "Верхнеуровневая оркестрация ADR-015 (Stage 2+).",
      "engine_profile": "analysis-default"
    },
    {
      "id": "research-structure",
      "path": "workflows/research-structure.yaml",
      "description": "Оркестрация скриптов research-structure.",
      "engine_profile": "analysis-default"
    }
  ],
  "meta": {
    "name": "Project Analyse Bundle",
    "description": "ADR-015: проектный анализ (Stage 1: research-structure, Stage 2+: research-analyse).",
    "adr": "ADR-015"
  }
}
